apiVersion: v1
kind: Secret
metadata:
  name: keda-metric-api-tls-auth
  namespace: default
data:
  authMode: "dGxzQXV0aA=="
  cert: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURwekNDQW8rZ0F3SUJBZ0lCQWpBTkJna3Foa2lHOXcwQkFRVUZBRENCa1RFTE1Ba0dBMVVFQmhNQ1JFVXgKRERBS0JnTlZCQWdNQTA1U1Z6RU9NQXdHQTFVRUJ3d0ZSV0Z5ZEdneEZ6QVZCZ05WQkFvTURsSmhibVJ2YlNCRApiMjF3WVc1NU1Rc3dDUVlEVlFRTERBSkpWREVYTUJVR0ExVUVBd3dPZDNkM0xuSmhibVJ2YlM1amIyMHhKVEFqCkJna3Foa2lHOXcwQkNRRVdGa3R5ZVhCMGIwdHBibWR6UUhKaGJtUnZiUzVqYjIwd0hoY05NakF3T1RFeE1UazEKTXpNeFdoY05NakV3T1RFeE1UazFNek14V2pDQmdqRUxNQWtHQTFVRUJoTUNSRVV4RERBS0JnTlZCQWdNQTA1UwpWekVPTUF3R0ExVUVCd3dGUldGeWRHZ3hGekFWQmdOVkJBb01EbEpoYm1SdmJTQkRiMjF3WVc1NU1Rc3dDUVlEClZRUUxEQUpKVkRFVE1CRUdBMVVFQXd3S1kyeHBaVzUwTG1OdmJURWFNQmdHQ1NxR1NJYjNEUUVKQVJZTFlXSmoKUUhoNVl5NWpiMjB3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQ2lGandaWU9nMApzZU03QVBVS0EvVWRHSUJ3WEt0OGFMUzVEdWZJVFJ2L1BPNXZMdEY4UVNvTTRORGIwcWtDalFGQVI5UnpQeSttCkRCaEIzSVNiMTNLemprNThXejU3ZTMxSU9kTFR4Z1ptdHhuMVV2cnVRS3JUamxNbENxcFVyZitqM21uaEl4QTgKQlpxVFJaeWlZdDc5VVZRS2F6OG9IU05odHVSbWdWMHhDRGhVUGN1ZGYxNkttSE82Yk8xckxiUjlFRzE0M0NjbQpka05jaTFBcFlITUoxYUFvVVFKZ2FPcXJBcGkzb2FCdy9BbXZHYU1uL0htalhjRi9kUUhvNjJDUkEyaUx6TngvCnlEd1V5QWszUEtFMjZhVnRLL1RsajJoZEN3UDc4SEZpR0hwanQ2dDZ3ZTJBelhVVkVCTVdLOHNwTFB5d3dmUFIKa2FxaS80cEk0bFRyQWdNQkFBR2pGekFWTUJNR0ExVWRKUVFNTUFvR0NDc0dBUVVGQndNQ01BMEdDU3FHU0liMwpEUUVCQlFVQUE0SUJBUUNMU09PUmp4bi9zYlpTblc1ckZGSkhDVnJabWZ4MDZyRlJDUDVya3BBWis1V3pXV1BZCkdCZGUwcWljMXp3UVVHUld1emplNHlsMENBYUpRblEreTgxalQzeVlKZUJudHlEbzJoV3VPVldvVklQYWF1NEkKZDAvRXVIbkdwZzBkNFIvTWQrclFmd0RJbURJZWFYYWlNNDUwdEZOb0xVb0tQR0k3Z2JKYUNsZ1N5QmJsZVBYdApDa0xnSFU0cGZiaTk5MUY3dExRaHNYUCs1SURxam5GVVpSYjkvOUlGNE9MSitFUlpHN0MzLzZFVmRQV0FDYmRkCk8vRGgzVFM5YzVTWCtrcXNBZERJOFRUcmtYLzBITkdTZEM4SzlWYVdiVDBTTmdLTmQ4Z0Z2UmNQVUZDbUpiZW4KekszdmFUUUlOZmV0bFNIT0FXNHpEMGNEbEVYTUVjUU1MTFdoCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0="
  key: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBb2hZOEdXRG9OTEhqT3dEMUNnUDFIUmlBY0Z5cmZHaTB1UTdueUUwYi96enVieTdSCmZFRXFET0RRMjlLcEFvMEJRRWZVY3o4dnBnd1lRZHlFbTlkeXM0NU9mRnMrZTN0OVNEblMwOFlHWnJjWjlWTDYKN2tDcTA0NVRKUXFxVkszL285NXA0U01RUEFXYWswV2NvbUxlL1ZGVUNtcy9LQjBqWWJia1pvRmRNUWc0VkQzTApuWDllaXBoenVtenRheTIwZlJCdGVOd25KblpEWEl0UUtXQnpDZFdnS0ZFQ1lHanFxd0tZdDZHZ2NQd0pyeG1qCkoveDVvMTNCZjNVQjZPdGdrUU5vaTh6Y2Y4ZzhGTWdKTnp5aE51bWxiU3YwNVk5b1hRc0QrL0J4WWhoNlk3ZXIKZXNIdGdNMTFGUkFURml2TEtTejhzTUh6MFpHcW92K0tTT0pVNndJREFRQUJBb0lCQUhCRGxqeTlzaGROWG1Wdgp0RWpMbE9vaUhsTzAyOUcvYyt6NU5mQzE5NzVCSmFROGVUdm1wb2xrN1VSVUZGdC83bTNuVW03QVJQQnRVQi9OCjdNdEQzbDRmSXAxZlZWZVJvS1IxNkdCbHQrbE15TjN5SzNyNXIxZjRLLzVyOUszU0ZrNFpycHdRL1IyVmhBcWQKSEhBY3F2WXBibHdKRENWc2lTVVUxLzFuZkhTSWNzTGlrSkhhbENGR2FJejE1WXB4emlnamlqemwwZ29oUHJXeQo4OXdMWUVydWg4eGIzTllmek5ZemVrS0RFbW5uc0V6dGNLRDAraHhId0VVSkFOaUVaeFdmZ0Z2Smk3T3F2d2lUCjlPcjBMU1RZNElDbXRQT3BSRXRCOS9uM1k5eFphb05wTFRBNlJlcjhLQXd1RVFEcjRRSjVzWnBIcUZQaDg2QjUKQjljejVBRUNnWUVBejBhRjB2UjZXVlh3a0FwcUk0bFdMUjcvaktQZ29LbkRUOER3QlM2NWpmVEgyNXVMNmFZZwpjdGFWRXlEbUpXS0ZHQVExaDQxb0ZRUmFwUHhBMU1TSmh5dXRYL0xUdzdVdFgxa3BsN1BEMnJZdDNXVDJiTCsvCk5MOWlSWnN6NUJsZzM5Q1l6d0ZYMVpzaytEUzkveWhNbndHa2N4Q0dQc2gxdXpMekJ1SkJmWXNDZ1lFQXlEQlcKMjVSSzYydnBRVlZzSzVzbFE0dER3ZzhZSXQzZFp5bEVuTDBkZkY5cVBwUDMyUUo5c05OQXd4aVk1SGdxR0hGcwpZTkx5RmdTeW8rS0grUG9mUWRVeEY5L0FxREZCMzhnOE1McnFiV09Oby9sZXBkMyt6eEUzWTRoeHF3cDRPQ1VhCkUwanFYK0E3ZHlUMHN3Vnc1SnMrK04xY2NyeTJHMGRmQ0ZGRU1pRUNnWUVBajNZUVNlSk1qR2lmQ0JNdFEwdGIKQ2YvYWdFMHN2QWJEMS8rQ0lSUWwrY3JpU1cxdmVWZ3lQVW1vQklWUXhhOWF6elNhbUNlWFVuU2hDSEJQcnZRWQovQ1dPNmtuM3FBMU9TaUE4V1hOaXE0NU1VR0FBNzJRSHcwcHppaG5SNEo1d0hua1NTclJ6UnJVSzhZQVB3UHJ6CmpWcGxwLzVYN0R4eXdBNlRoc0F5OCtFQ2dZQTlnRXhPN1VJUERYbjlybWFyQnVEdDNVMFZ3MWxnN05SbUt4Ri8KTGNKdlFVajhyS3pLS0svQXNVWUdLZnBleG1QNFduQTNWdGMwMklDaFJLa05YcHBYdVUxNXppMzcvaFlFMEJsZAp4eTdhS0dtTlpNRWxLQXh1UlJYRktGZnplaVh3NmNVWEE2R3Rqcy8yREk1NHFVVkRsa1pFWW8xU1dwTi8wZTlxCk9MMUF3UUtCZ1FDbEQ0bUlHNk1zTW1rclg0ZXBRT05WY1pQYXY2aXN4b0t2R3ZuNzBoR0p1VEhNenJoQUdGR3cKYWxNU1YxLzA5WklFNE1xN2VRajk2SU5iNi9lb3k5Y2cxcHZwSFg3dXZZbVpsMzVISm04b1hnQ3ZWQ2Q3dzc4bgpzUmZWUmloeUNUTTFBNnVmU2ExUER0Rjk4RnQwdmRjaGNYUmJQb0NESTVVdzdCVk4zODhmSXc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQ=="
  ca: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURvRENDQW9nQ0NRQzhDU1B1bmdveFlUQU5CZ2txaGtpRzl3MEJBUXNGQURDQmtURUxNQWtHQTFVRUJoTUMKUkVVeEREQUtCZ05WQkFnTUEwNVNWekVPTUF3R0ExVUVCd3dGUldGeWRHZ3hGekFWQmdOVkJBb01EbEpoYm1SdgpiU0JEYjIxd1lXNTVNUXN3Q1FZRFZRUUxEQUpKVkRFWE1CVUdBMVVFQXd3T2QzZDNMbkpoYm1SdmJTNWpiMjB4CkpUQWpCZ2txaGtpRzl3MEJDUUVXRmt0eWVYQjBiMHRwYm1kelFISmhibVJ2YlM1amIyMHdIaGNOTWpBd09URXgKTVRrMU16TXhXaGNOTWpFd09URXhNVGsxTXpNeFdqQ0JrVEVMTUFrR0ExVUVCaE1DUkVVeEREQUtCZ05WQkFnTQpBMDVTVnpFT01Bd0dBMVVFQnd3RlJXRnlkR2d4RnpBVkJnTlZCQW9NRGxKaGJtUnZiU0JEYjIxd1lXNTVNUXN3CkNRWURWUVFMREFKSlZERVhNQlVHQTFVRUF3d09kM2QzTG5KaGJtUnZiUzVqYjIweEpUQWpCZ2txaGtpRzl3MEIKQ1FFV0ZrdHllWEIwYjB0cGJtZHpRSEpoYm1SdmJTNWpiMjB3Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQgpEd0F3Z2dFS0FvSUJBUUNqVEwxREd0dk9aeTZ0ekZkaC9IQW91WkMzSEV4d3QzbSs3UGFwK2xVbTh5SlkvdXRCCk9EM29TVmh2SjF5SzhUeUpVT0ZuZ2hPLy9aYU1FQ1VLYU5zVlQ1U0l3QkwxR2RuSWk4VjNQdTRMbVFua1d4cUwKMmd0STdpR25LbDl2WXFHZ0RwQnhIN1JEQm1ldWJWWDVJWnV6QlNwT3UxWWQwd01ERzNDdkFEYnN6MDF1QmhrOQp4YkpGM0ZrUk8xWFgzanMwcWlwT2Q4TzFsaXZNMW9wZk5Yc2pNZVlnaG1iV3VEZmE3SXVodGVPNUpibUdybEJOCmhQVEoyVHh6Z05qdERRQXFNa2VvZzJ4TWd1Z0M1YXBURklqejZ1c3RzSVk3SVRkcU5EWFIyL2hhc2Jhb0JkR3cKRkNuU3JFeEcvZ1g5S2hnWVVGYjdkdU9GVzNJbzN3UVZ1R0wzQWdNQkFBRXdEUVlKS29aSWh2Y05BUUVMQlFBRApnZ0VCQUZxRFRwYVNaWFpEdE9UcnowaEQ2ZnJEcStLSFRiU2lyeEtGN1pYdi9vUUdEVUdFbWxyVFlKeWUvcG5SCjFDRTB0Sm52V1pTWkhEMXpKV0Uya1JYTHlwclZiMHErcjRHdFBmSmR0MGNnYUQ1WmlUdlFJRngycTgxYTZMNGsKTWRBU0p6U2RqNURCU2sra0Y2Rk0zVmZZN0MyZ3hJeUZvSTczLzJGb1JYVTljT2kwMUVVZjMyeUdpRGxyRDIwZQpKZC9RanJHQmJMOExNeHNlbkkzQm5LcWxyaDhnVnlyNGFDVlNVUSt2dlkwQk1PbzVFNm5vb0tpbzVvRWk5bjYrClF0encrUmQ5emhuZThxcU1pc2EyOGMvU3FnNEpjR0JxOVhmVHp5QmxNbEY1bDEyUkEvMHBxUllRQnlpSzZTemcKMy9XTkc5ZVFYMXNENnlKd3dTVEtpMVlPMTFBPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0t"
---
apiVersion: keda.sh/v1alpha1
kind: TriggerAuthentication
metadata:
  name: keda-metric-api-basic-tls-credential
  namespace: default
spec:
  secretTargetRef:
    - parameter: authMode
      name: keda-metric-api-tls-auth
      key: authMode
    - parameter: cert
      name: keda-metric-api-tls-auth
      key: cert
    - parameter: key
      name: keda-metric-api-tls-auth
      key: key
    - parameter: ca
      name: keda-metric-api-tls-auth
      key: ca
---
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: http-scaledobject-tls
  namespace: default
  labels:
    deploymentName: dummy-tls-auth
spec:
  maxReplicaCount: 4
  pollingInterval: 3  # Optional. Default: 30 seconds
  cooldownPeriod:  5 # Optional. Default: 300 seconds
  scaleTargetRef:
    deploymentName: dummy-tls-auth
    name: dummy-tls-auth
  triggers:
    - type: metrics-api
      metadata:
        targetValue: "1"
        url: "https://localhost:6000/app/clientAuth/metric/metricid"
        valueLocation: "metric"
      authenticationRef:
        name: keda-metric-api-basic-tls-credential